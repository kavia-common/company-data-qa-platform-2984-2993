{"is_source_file": true, "format": "Python", "description": "This file defines a Python module for a Retrieval-Augmented Generation (RAG) pipeline, including one public function 'ask_question' that orchestrates question embedding, document retrieval with FAISS, context construction, LLM calling, and persistence of question/answer pairs. It also imports models, configuration, embedding, FAISS index handling, and OpenAI client utilities.", "external_files": ["../models", ".config", ".embeddings", ".faiss_index", ".openai_client"], "external_methods": ["ensure_index_in_sync", "get_faiss_index", "embed_texts", "generate_answer", "Question.objects.create", "Answer.objects.create", "DocumentChunk.objects.filter"], "published": ["ask_question"], "classes": [], "methods": [{"name": "Dict ask_question(text: str, user: UserProfile | None = None)", "description": "Orchestrates the RAG process: embedding a question, retrieving relevant chunks via FAISS, constructing context, calling the language model, and saving question and answer data.", "scope": "", "scopeKind": ""}], "calls": ["ensure_index_in_sync()", "embed_texts([text])", "get_faiss_index().search(q_vec, top_k=SETTINGS.rag_top_k)", "DocumentChunk.objects.filter(id__in=[cid for cid, _ in results])", "Question.objects.create(...)", "Answer.objects.create(...)", "generate_answer(text, context_snippets)"], "search-terms": ["RAG pipeline", "embed_texts", "faiss_index", "generate_answer", "ask_question"], "state": 2, "file_id": 25, "knowledge_revision": 78, "git_revision": "497ec7312d44ba405c55c98a2c65e0d8dc503842", "revision_history": [{"52": ""}, {"78": "497ec7312d44ba405c55c98a2c65e0d8dc503842"}], "ctags": [{"_type": "tag", "name": "ask_question", "path": "/home/kavia/workspace/code-generation/company-data-qa-platform-2984-2993/qanda_backend/api/services/rag.py", "pattern": "/^def ask_question(text: str, user: UserProfile | None = None) -> Dict:$/", "language": "Python", "typeref": "typename:Dict", "kind": "function", "signature": "(text: str, user: UserProfile | None = None)"}], "hash": "d7d81ccefd5ce582eeae6d71b809d7cc", "format-version": 4, "code-base-name": "qanda_backend", "filename": "qanda_backend/api/services/rag.py"}