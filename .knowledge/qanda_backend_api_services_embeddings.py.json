{"is_source_file": true, "format": "Python", "description": "This file defines a Python module for generating text embeddings, either via the OpenAI API or via a deterministic fallback method. It includes utility functions, configuration usage, and conditional external dependencies.", "external_files": ["from .config import SETTINGS"], "external_methods": ["OpenAI() from openai", "client.embeddings.create()", "np.linalg.norm"], "published": ["embed_texts"], "classes": [], "methods": [{"name": "List[float] _fallback_vector(text: str, dim: int)", "description": "Generates a deterministic pseudo-embedding vector from text using hashing for fallback purposes.", "parameters": ["text: str", "dim: int"], "scope": "", "scopeKind": ""}, {"name": "List[List[float]] embed_texts(texts: List[str])", "description": "Computes embeddings for a list of texts, using OpenAI's API if available and configured, otherwise falls back to a deterministic hash-based method.", "parameters": ["texts: List[str]"], "scope": "", "scopeKind": ""}], "calls": ["hashlib.sha256", "np.array", "np.linalg.norm", "OPENAI_API_KEY", "SETTINGS.embedding_dim", "SETTINGS.openai_api_key", "SETTINGS.embedding_model", "OpenAI()", "client.embeddings.create()", "logger.info", "logger.error"], "search-terms": ["embeddings", "fallback vector", "OpenAI API", "text embedding", "deterministic hash"], "state": 2, "file_id": 23, "knowledge_revision": 85, "git_revision": "8c501e32b9060d2803a95c7b6ecfa4f7be04b5ad", "revision_history": [{"48": ""}, {"69": ""}, {"84": "8c501e32b9060d2803a95c7b6ecfa4f7be04b5ad"}, {"85": "8c501e32b9060d2803a95c7b6ecfa4f7be04b5ad"}], "ctags": [{"_type": "tag", "name": "OpenAI", "path": "/home/kavia/workspace/code-generation/company-data-qa-platform-2984-2993/qanda_backend/api/services/embeddings.py", "pattern": "/^    OpenAI = None$/", "language": "Python", "kind": "variable"}, {"_type": "tag", "name": "_fallback_vector", "path": "/home/kavia/workspace/code-generation/company-data-qa-platform-2984-2993/qanda_backend/api/services/embeddings.py", "pattern": "/^def _fallback_vector(text: str, dim: int) -> List[float]:$/", "language": "Python", "typeref": "typename:List[float]", "kind": "function", "signature": "(text: str, dim: int)"}, {"_type": "tag", "name": "embed_texts", "path": "/home/kavia/workspace/code-generation/company-data-qa-platform-2984-2993/qanda_backend/api/services/embeddings.py", "pattern": "/^def embed_texts(texts: List[str]) -> List[List[float]]:$/", "language": "Python", "typeref": "typename:List[List[float]]", "kind": "function", "signature": "(texts: List[str])"}, {"_type": "tag", "name": "logger", "path": "/home/kavia/workspace/code-generation/company-data-qa-platform-2984-2993/qanda_backend/api/services/embeddings.py", "pattern": "/^logger = logging.getLogger(\"api\")$/", "language": "Python", "kind": "variable"}, {"_type": "tag", "name": "np", "path": "/home/kavia/workspace/code-generation/company-data-qa-platform-2984-2993/qanda_backend/api/services/embeddings.py", "pattern": "/^import numpy as np  # type: ignore$/", "language": "Python", "kind": "namespace", "nameref": "module:numpy"}], "hash": "00dffc65e972ba0b35eb02ad162f8222", "format-version": 4, "code-base-name": "qanda_backend", "filename": "qanda_backend/api/services/embeddings.py", "fields": [{"name": "OpenAI = None", "scope": "", "scopeKind": "", "description": "unavailable"}, {"name": "logger = logging.getLogger(\"api\")", "scope": "", "scopeKind": "", "description": "unavailable"}]}